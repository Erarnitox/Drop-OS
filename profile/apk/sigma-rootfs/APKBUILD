# Contributor: Rdbo
# Maintainer:
pkgname="$PROFILENAME-rootfs"
pkgver="$PROFILEVER"
pkgrel=0
pkgdesc="RootFS for '$PROFILENAME'"
url="$PROFILEURL"
arch="$PROFILEARCH"
license="GNU AGPL-3.0"
depends="$APKLIST"
makedepends="tar gzip make gcc"
checkdepends=""
install=""
subpackages=""
source="rootfs.tar.gz"
builddir="$srcdir/"
sha512sums="$ROOTFS_SHA512"

build() {
        tar -zxvf rootfs.tar.gz
	rootfs="$srcdir/rootfs"
	cd "$rootfs"/usr/src
	mkdir -p "$rootfs"/usr/bin
	make -C sigma-dmenu install clean DESTDIR="$rootfs"/ PREFIX=/usr
	make -C sigma-dwm install clean DESTDIR="$rootfs"/ PREFIX=/usr
	make -C sigma-dwmblocks-async install clean DESTDIR="$rootfs"/ PREFIX=/usr
	make -C sigma-slock install clean DESTDIR="$rootfs"/ PREFIX=/usr
	make -C sigma-st install clean DESTDIR="$rootfs"/ PREFIX=/usr
	make -C sigma-svkbd install clean DESTDIR="$rootfs"/ PREFIX=/usr
	install -m 0755 sigma-dwmblocks-async/scripts/* "$rootfs"/usr/bin/
        find "$rootfs"/usr/share/man -type f -exec gzip {} \;
}

check() {
        :
}

package() {
        mkdir -p "$pkgdir"
        cp -rf "$srcdir"/rootfs/. "$pkgdir"/
}

